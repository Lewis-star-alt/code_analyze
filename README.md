# Code Analyzer

Статический анализатор кода на Rust для поиска потенциальных проблем в исходных файлах.

## Возможности

- **Поддержка нескольких языков**: Rust, C, C++
- **Различные уровни серьезности**: Ошибки, предупреждения, информационные сообщения
- **Гибкая настройка**: Возможность игнорирования файлов и директорий
- **Два формата вывода**: Подробный и компактный
- **Автоматическое игнорирование**: Системные директории (target/, .git/, node_modules/, build/)

## Установка

### Требования

- Rust 1.70 или новее
- Cargo

### Сборка из исходников

```bash
git clone https://github.com/Lewis-star-alt/code_analyze
cd code-analyzer
cargo build --release
```

## Использование

### Базовое использование

```bash
# Анализ текущей директории
code-analyze .

# Анализ конкретной директории
code-analyze /path/to/project

# Показать только ошибки
code-analyze . --errors-only

# Компактный формат вывода
code-analyze . --format compact

# Игнорирование определенных паттернов
code-analyze . --ignore "test" --ignore "temp"
```

### Параметры командной строки

- `path`: Путь к анализируемой директории (обязательный)
- `-e, --errors-only`: Показывать только ошибки
- `-f, --format <FORMAT>`: Формат вывода (text|compact), по умолчанию: text
- `-i, --ignore <IGNORE>`: Паттерны для игнорирования файлов/директорий

## Поддерживаемые правила анализа

### Rust правила

- **rust-unsafe-block**: Обнаружение unsafe блоков
- **rust-unwrap**: Использование unwrap() (может вызвать панику)
- **rust-expect**: Использование expect() (может вызвать панику)
- **rust-todo**: TODO комментарии
- **rust-fixme**: FIXME комментарии

### C/C++ правила

- **c-unsafe-function**: Использование небезопасных функций (gets, strcpy, sprintf)
- **c-malloc-without-free**: malloc без явного освобождения
- **c-printf-format**: Использование printf вместо более безопасных альтернатив

### Общие правила

- **long-line**: Строки длиннее 100 символов
- **magic-number**: "Магические числа" в коде (числа от 3 и выше, а также все двузначные и более числа)

## Примеры вывода

### Подробный формат (text)

```
Результаты анализа:
==================

WARNING: src/main.rs:45
  Правило: rust-unwrap
  Сообщение: Использование unwrap() может вызвать панику
  Код: let value = some_option.unwrap();

INFO: src/lib.rs:12
  Правило: rust-todo
  Сообщение: Найден TODO комментарий
  Код: // TODO: реализовать эту функцию

Статистика:
  Ошибки: 0
  Предупреждения: 3
  Заметки: 5
  Всего: 8
```

### Компактный формат (compact)

```
src/main.rs:45:W: rust-unwrap - Использование unwrap() может вызвать панику
src/lib.rs:12:I: rust-todo - Найден TODO комментарий
```

## Разработка

### Добавление новых правил

Для добавления нового правила необходимо изменить функцию `get_text_rules()`:

```rust
TextRule::new(
    "unique-rule-name",      // Уникальное имя правила
    r"regex-pattern",        // Регулярное выражение для поиска
    "Описание проблемы",     // Сообщение об ошибке
    Severity::Warning,       // Уровень серьезности
    vec!["rust", "c"]        // Поддерживаемые языки
)
```

### Архитектура

Проект состоит из следующих основных компонентов:

1. **CLI Parser**: Обработка аргументов командной строки
2. **Rule Engine**: Система правил для анализа кода
3. **File Walker**: Рекурсивный обход файловой системы
4. **Result Formatter**: Форматирование и вывод результатов



## Вклад в проект

1. Форкните репозиторий
2. Создайте ветку для новой функции (`git checkout -b feature/amazing-feature`)
3. Закоммитьте изменения (`git commit -m 'Add amazing feature'`)
4. Запушьте в ветку (`git push origin feature/amazing-feature`)
5. Создайте Pull Request



## Планы по развитию

- [ ] Поддержка большего количества языков (Python, JavaScript, Java)
- [ ] Конфигурационный файл для настройки правил
- [ ] Поддержка пользовательских правил
- [ ] Интеграция с CI/CD системами
- [ ] HTML отчеты
- [ ] Статистика по проекту